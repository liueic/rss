# RSS ç›‘æ§å™¨

ä¸€ä¸ªç”¨ Go ç¼–å†™çš„è½»é‡çº§ RSS ç›‘æ§æœåŠ¡ï¼Œè¿è¡Œåœ¨ GitHub Actions ä¸Šï¼Œé€šè¿‡ Bark å‘ iOS è®¾å¤‡å‘é€æ¨é€é€šçŸ¥ã€‚

[English](README.md) | ç®€ä½“ä¸­æ–‡

## åŠŸèƒ½ç‰¹æ€§

- ğŸš€ è‡ªåŠ¨è¿è¡Œåœ¨ GitHub Actions ä¸Šï¼ˆå…è´¹é¢åº¦ï¼‰
- ğŸ“± é€šè¿‡ Bark å‘ iOS è®¾å¤‡æ¨é€é€šçŸ¥
- ğŸ”„ å¹¶å‘ç›‘æ§å¤šä¸ª RSS æº
- ğŸ’¾ çŠ¶æ€æŒä¹…åŒ–åœ¨ä»“åº“ä¸­
- ğŸ” æ™ºèƒ½å»é‡ï¼ˆæ”¯æŒ GUIDã€é“¾æ¥æˆ–æ ‡é¢˜ï¼‰
- ğŸ“¦ å•ä¸€é™æ€äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ— è¿è¡Œæ—¶ä¾èµ–
- ğŸ”§ æ˜“äºé…ç½®å’Œç»´æŠ¤
- ğŸ¯ æ”¯æŒå•æ¡å’Œèšåˆé€šçŸ¥
- ğŸŒ å®Œæ•´æ”¯æŒä¸­æ–‡å†…å®¹

## å¿«é€Ÿå¼€å§‹

### 1. Fork æˆ–å…‹éš†æ­¤ä»“åº“

```bash
git clone https://github.com/rsswatcher/rsswatcher.git
cd rsswatcher
```

### 2. é…ç½® RSS æº

å¤åˆ¶ç¤ºä¾‹é…ç½®å¹¶ç¼–è¾‘ï¼š

```bash
cp feeds.yaml.example feeds.yaml
```

ç¼–è¾‘ `feeds.yaml` æ·»åŠ ä½ çš„ RSS æºï¼š

```yaml
feeds:
  - id: my-blog
    name: æˆ‘çš„åšå®¢
    url: https://example.com/rss.xml
    notify: true
    dedupe_key: guid
    aggregate: false
```

### 3. è®¾ç½® Bark

1. åœ¨ iOS è®¾å¤‡ä¸Šå®‰è£… [Bark](https://apps.apple.com/cn/app/bark-customed-notifications/id1403753865)
2. æ‰“å¼€åº”ç”¨å¹¶å¤åˆ¶ä½ çš„è®¾å¤‡å¯†é’¥ï¼ˆæ ¼å¼ï¼š`https://api.day.app/ä½ çš„è®¾å¤‡å¯†é’¥`ï¼‰
3. è®¾å¤‡å¯†é’¥å°±æ˜¯ URL ä¸­ `/` åé¢çš„éƒ¨åˆ†

### 4. é…ç½® GitHub Secrets

è¿›å…¥ä½ çš„ä»“åº“ Settings â†’ Secrets and variables â†’ Actionsï¼Œæ·»åŠ ï¼š

- `BARK_DEVICE_KEY`ï¼šä½ çš„ Bark è®¾å¤‡å¯†é’¥ï¼ˆå¿…éœ€ï¼‰
- `BARK_SERVER`ï¼šè‡ªå®šä¹‰ Bark æœåŠ¡å™¨ URLï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º `https://api.day.app`ï¼‰

### 5. å¯ç”¨ GitHub Actions

å·¥ä½œæµé…ç½®ä¸ºæ¯ 30 åˆ†é’Ÿè¿è¡Œä¸€æ¬¡ã€‚ä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨è§¦å‘ï¼š

1. è¿›å…¥ä»“åº“çš„ "Actions" æ ‡ç­¾é¡µ
2. é€‰æ‹© "RSS Monitor (Go + Bark)"
3. ç‚¹å‡» "Run workflow"

### 6. æäº¤å¹¶æ¨é€

```bash
git add feeds.yaml
git commit -m "æ·»åŠ æˆ‘çš„ RSS æº"
git push
```

å·¥ä½œæµå°†è‡ªåŠ¨å¼€å§‹è¿è¡Œï¼

## é…ç½®è¯´æ˜

### æºé…ç½®é€‰é¡¹

| å­—æ®µ | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|------|------|------|------|
| `id` | string | æ˜¯ | æºçš„å”¯ä¸€æ ‡è¯†ç¬¦ |
| `name` | string | æ˜¯ | é€šçŸ¥ä¸­æ˜¾ç¤ºçš„åç§° |
| `url` | string | æ˜¯ | RSS/Atom æºçš„ URL |
| `notify` | boolean | å¦ | æ˜¯å¦å¯ç”¨é€šçŸ¥ï¼ˆé»˜è®¤ï¼štrueï¼‰ |
| `dedupe_key` | string | å¦ | å»é‡é”®ï¼š`guid`ã€`link` æˆ– `title`ï¼ˆé»˜è®¤ï¼š`guid`ï¼‰ |
| `aggregate` | boolean | å¦ | æ˜¯å¦å‘é€èšåˆé€šçŸ¥ï¼ˆé»˜è®¤ï¼šfalseï¼‰ |
| `aggregate_window_minutes` | int | å¦ | èšåˆçª—å£æ—¶é—´ï¼ˆåˆ†é’Ÿï¼Œé»˜è®¤ï¼š30ï¼‰ |

### é…ç½®ç¤ºä¾‹

#### å•æ¡é€šçŸ¥

```yaml
feeds:
  - id: tech-blog
    name: æŠ€æœ¯åšå®¢
    url: https://techblog.example.com/rss
    notify: true
    dedupe_key: guid
    aggregate: false
```

#### èšåˆé€šçŸ¥

```yaml
feeds:
  - id: news-feed
    name: æ–°é—»æº
    url: https://news.example.com/feed
    notify: true
    dedupe_key: link
    aggregate: true
    aggregate_window_minutes: 60
```

## æœ¬åœ°å¼€å‘

### å‰ç½®è¦æ±‚

- Go 1.22 æˆ–æ›´é«˜ç‰ˆæœ¬
- Git

### æ„å»º

```bash
go build -o rsswatcher ./cmd/rsswatcher
```

### æœ¬åœ°è¿è¡Œ

```bash
export BARK_DEVICE_KEY="ä½ çš„è®¾å¤‡å¯†é’¥"
./rsswatcher --config feeds.yaml --state state/last_states.json
```

### è¿è¡Œæµ‹è¯•

```bash
go test ./...
```

## æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GitHub Actions  â”‚
â”‚   (å®šæ—¶è°ƒåº¦)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   rsswatcher    â”‚
â”‚   (Go äºŒè¿›åˆ¶)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                     â”‚
    â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Feeds  â”‚         â”‚  State   â”‚
â”‚  .yaml  â”‚         â”‚  .json   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚                   â”‚
     â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚    â”‚
     â–¼    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Fetcher    â”‚
â”‚   Parser     â”‚
â”‚   Deduper    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Bark      â”‚
â”‚  Notifier    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ iOS è®¾å¤‡     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ cmd/
â”‚   â””â”€â”€ rsswatcher/
â”‚       â””â”€â”€ main.go           # åº”ç”¨ç¨‹åºå…¥å£
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ config.go         # é…ç½®è§£æ
â”‚   â”œâ”€â”€ fetcher/
â”‚   â”‚   â””â”€â”€ fetcher.go        # RSS æºè·å–ï¼ˆå¸¦é‡è¯•ï¼‰
â”‚   â”œâ”€â”€ parser/
â”‚   â”‚   â””â”€â”€ parser.go         # RSS/Atom è§£æ
â”‚   â”œâ”€â”€ deduper/
â”‚   â”‚   â””â”€â”€ deduper.go        # å»é‡é€»è¾‘
â”‚   â”œâ”€â”€ notifier/
â”‚   â”‚   â””â”€â”€ bark.go           # Bark é€šçŸ¥å®¢æˆ·ç«¯
â”‚   â””â”€â”€ state/
â”‚       â””â”€â”€ state.go          # çŠ¶æ€æŒä¹…åŒ–
â”œâ”€â”€ state/
â”‚   â””â”€â”€ last_states.json      # çŠ¶æ€æ–‡ä»¶ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ rss-monitor.yml   # GitHub Actions å·¥ä½œæµ
â”œâ”€â”€ feeds.yaml                # ä½ çš„æºé…ç½®
â”œâ”€â”€ feeds.yaml.example        # ç¤ºä¾‹é…ç½®
â”œâ”€â”€ go.mod
â”œâ”€â”€ go.sum
â””â”€â”€ README.md
```

## æ•…éšœæ’æŸ¥

### æœªæ”¶åˆ°é€šçŸ¥

1. æ£€æŸ¥ `BARK_DEVICE_KEY` æ˜¯å¦åœ¨ GitHub Secrets ä¸­æ­£ç¡®è®¾ç½®
2. é€šè¿‡å‘é€æµ‹è¯•é€šçŸ¥éªŒè¯è®¾å¤‡å¯†é’¥ï¼š
   ```bash
   curl "https://api.day.app/ä½ çš„è®¾å¤‡å¯†é’¥/æµ‹è¯•/ä½ å¥½"
   ```
3. æ£€æŸ¥ GitHub Actions æ—¥å¿—æ˜¯å¦æœ‰é”™è¯¯

### çŠ¶æ€æœªæ›´æ–°

1. ç¡®ä¿å·¥ä½œæµæœ‰ä»“åº“çš„å†™å…¥æƒé™
2. æ£€æŸ¥åˆ†æ”¯æ˜¯å¦å—ä¿æŠ¤ï¼ˆå¯èƒ½éœ€è¦é¢å¤–é…ç½®ï¼‰
3. æŸ¥çœ‹ Actions æ—¥å¿—ä¸­çš„ "Commit state" æ­¥éª¤

### æºæ— æ³•å·¥ä½œ

1. éªŒè¯ RSS æº URL æ˜¯å¦å¯è®¿é—®
2. æ£€æŸ¥æºæ ¼å¼ï¼ˆRSS/Atom/JSON Feedï¼‰
3. æŸ¥çœ‹æ—¥å¿—ä¸­çš„å…·ä½“é”™è¯¯ä¿¡æ¯

### å·¥ä½œæµæœªè¿è¡Œ

1. æ£€æŸ¥ä»“åº“æ˜¯å¦å¯ç”¨äº† GitHub Actions
2. éªŒè¯ `.github/workflows/rss-monitor.yml` ä¸­çš„ cron è°ƒåº¦
3. æ³¨æ„ï¼šåœ¨ä»“åº“ 60 å¤©æ— æ´»åŠ¨åï¼Œå®šæ—¶å·¥ä½œæµå¯èƒ½ä¼šè¢«ç¦ç”¨

## é«˜çº§ç”¨æ³•

### è‡ªå®šä¹‰ Bark æœåŠ¡å™¨

å¦‚æœä½ è¿è¡Œè‡ªå·±çš„ Bark æœåŠ¡å™¨ï¼š

```bash
# åœ¨ GitHub Secrets ä¸­è®¾ç½®
BARK_SERVER=https://your-bark-server.com
```

### è°ƒæ•´è°ƒåº¦é¢‘ç‡

ç¼–è¾‘ `.github/workflows/rss-monitor.yml`ï¼š

```yaml
on:
  schedule:
    - cron: '*/15 * * * *'  # æ¯ 15 åˆ†é’Ÿ
    # - cron: '0 * * * *'   # æ¯å°æ—¶
    # - cron: '0 */6 * * *' # æ¯ 6 å°æ—¶
```

## ä¸­æ–‡æ”¯æŒ

æœ¬é¡¹ç›®å®Œå…¨æ”¯æŒä¸­æ–‡å†…å®¹ï¼š

- âœ… æ­£ç¡®å¤„ç†ä¸­æ–‡å­—ç¬¦æˆªæ–­ï¼ˆæŒ‰å­—ç¬¦è€Œéå­—èŠ‚ï¼‰
- âœ… æ”¯æŒä¸­æ–‡ RSS æº
- âœ… ä¸­æ–‡é€šçŸ¥æ ‡é¢˜å’Œå†…å®¹
- âœ… ä¸­æ–‡é…ç½®åç§°
- âœ… å®Œæ•´çš„ä¸­æ–‡æ–‡æ¡£

### å­—ç¬¦ä¸²æˆªæ–­è¯´æ˜

é¡¹ç›®ä½¿ç”¨ Unicode å­—ç¬¦ï¼ˆruneï¼‰è€Œä¸æ˜¯å­—èŠ‚æ¥æˆªæ–­å­—ç¬¦ä¸²ï¼Œè¿™ç¡®ä¿ï¼š
- ä¸­æ–‡å­—ç¬¦ä¸ä¼šè¢«æˆªæ–­åˆ°ä¸€åŠ
- è¡¨æƒ…ç¬¦å·æ­£ç¡®æ˜¾ç¤º
- å…¶ä»–å¤šå­—èŠ‚å­—ç¬¦æ­£ç¡®å¤„ç†

## è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼è¯·éšæ—¶æäº¤ Pull Requestã€‚

## è®¸å¯è¯

MIT License - è¯¦è§ LICENSE æ–‡ä»¶

## å®‰å…¨

- æ°¸è¿œä¸è¦å°† `BARK_DEVICE_KEY` æäº¤åˆ°ä»“åº“
- ä½¿ç”¨ GitHub Secrets å­˜å‚¨æ‰€æœ‰æ•æ„Ÿæ•°æ®
- æ£€æŸ¥çŠ¶æ€æ–‡ä»¶ç¡®ä¿æ²¡æœ‰å­˜å‚¨æ•æ„Ÿä¿¡æ¯

## è‡´è°¢

- [gofeed](https://github.com/mmcdole/gofeed) - RSS/Atom è§£æå™¨
- [Bark](https://github.com/Finb/Bark) - iOS é€šçŸ¥æœåŠ¡
- å—åˆ°å„ç§ RSS ç›‘æ§è§£å†³æ–¹æ¡ˆçš„å¯å‘

## å¸¸è§é—®é¢˜

**é—®ï¼šè¿™éœ€è¦èŠ±è´¹å¤šå°‘é’±ï¼Ÿ**  
ç­”ï¼šå…è´¹ï¼GitHub Actions ä¸ºå…è´¹è´¦æˆ·æä¾›æ¯æœˆ 2,000 åˆ†é’Ÿã€‚

**é—®ï¼šå¯ä»¥ç”¨äº Android å—ï¼Ÿ**  
ç­”ï¼šå¯ä»¥è°ƒæ•´é€šçŸ¥å™¨ä»¥ä½¿ç”¨å…¶ä»–æœåŠ¡ï¼Œå¦‚ Telegramã€Discord æˆ– Pushoverã€‚

**é—®ï¼šå¯ä»¥ç›‘æ§å¤šå°‘ä¸ªæºï¼Ÿ**  
ç­”ï¼šä»…å— GitHub Actions æ‰§è¡Œæ—¶é—´é™åˆ¶ï¼ˆé€šå¸¸æœ€å¤šçº¦ 6 å°æ—¶ï¼‰ã€‚å¤§å¤šæ•°ç”¨æˆ·å¯ä»¥ç›‘æ§ 50-100 ä¸ªæºã€‚

**é—®ï¼šå¯ä»¥åœ¨ç§æœ‰ä»“åº“ä¸Šå·¥ä½œå—ï¼Ÿ**  
ç­”ï¼šå¯ä»¥ï¼ŒGitHub Actions åœ¨å…¬å…±å’Œç§æœ‰ä»“åº“ä¸Šéƒ½å¯ä»¥å·¥ä½œã€‚

## æ”¯æŒ

å¦‚æœé‡åˆ°ä»»ä½•é—®é¢˜ï¼Œè¯·ï¼š

1. æŸ¥çœ‹[æ•…éšœæ’æŸ¥](#æ•…éšœæ’æŸ¥)éƒ¨åˆ†
2. æŸ¥çœ‹ GitHub Actions æ—¥å¿—
3. æäº¤ issue å¹¶é™„ä¸Šé—®é¢˜è¯¦æƒ…
